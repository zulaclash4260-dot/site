# ๐ ุฑุงูููุง ุณูุฑุณ ุฑุจุงุช ุขูพููุฏุฑ ุชูฺฏุฑุงู

## ูุนุฑู
ุงู ุฑุจุงุช ุชูฺฏุฑุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ูุฑููุฑฺฉ **grammY** ู ุฒุจุงู **Node.js** ููุดุชู ุดุฏู ู ุงูฺฉุงู ูุฏุฑุช ูุงูุ ุงุฑุณุงู ููฺฏุงูุ ุฌูู ุงุฌุจุงุฑ ู ูพูู ูุฏุฑุช ุงุฏูู ุฑุง ูุฑุงูู ูโฺฉูุฏ.

---

## ุณุงุฎุชุงุฑ ูุงูโูุง

```
โโโ index.js              # ูุงู ุงุตู ุฑุจุงุช - ุซุจุช ุฏุณุชูุฑุงุช ู ููุฏูุฑูุง
โโโ db.js                 # ูุฏุฑุช ุฏุชุงุจุณ SQLite
โโโ package.json          # ูุงุจุณุชฺฏโูุง ู ุชูุธูุงุช npm
โโโ GUIDE.md              # ุงู ูุงู ุฑุงูููุง
โโโ src/
    โโโ admin.js          # ุชูุงุจุน ูพูู ุงุฏูู ู ููููุง
    โโโ broadcast.js      # ุงุฑุณุงู ููฺฏุงู ุจุง ูุฏุฑุช ูุฑุฎ ุงุฑุณุงู
    โโโ config.js         # ุชูุธูุงุชุ ูุงฺฏุฑ ู ูุชุบุฑูุง ูุญุท
    โโโ fileManager.js    # ูุฏุฑุช ูุงูโูุง (ุขูพููุฏุ ุงุฑุณุงูุ ุญุฐู)
    โโโ forceJoin.js      # ุณุณุชู ุฌูู ุงุฌุจุงุฑ ฺฉุงูุงู
    โโโ helpers.js        # ุชูุงุจุน ฺฉูฺฉ (ุณุงุฎุช ุดูุงุณูุ ุงุฑุณุงู ุงูู)
    โโโ middleware.js     # ูุฏููุฑูุง (ุณุดูุ ุถุฏ ุงุณูพูุ ุจุฑุฑุณ ุจู)
```

---

## ุฑุงูโุงูุฏุงุฒ

### ูพุดโูุงุฒูุง
- Node.js ูุณุฎู 16 ุง ุจุงูุงุชุฑ
- npm

### ูุตุจ
```bash
npm install
```

### ุชูุธู ุชูฺฉู ู ุงุฏููโูุง
ููุงุฏุฑ `TOKEN` ู `ADMIN_IDs` ุฑุง ูุณุชููุงู ุฏุฑ ูุงู `src/config.js` ูุฑุงุด ฺฉูุฏ.

### ุงุฌุฑุง
```bash
node index.js
```

---

## ุชูุถุญ ูุงฺููโูุง

### `index.js` - ูุงู ุงุตู
- ุงุฌุงุฏ ููููู ุฑุจุงุช ู ุซุจุช ูุฏููุฑูุง
- ุซุจุช ุฏุณุชูุฑุงุช (`/start`ุ `/cancel`ุ `/help`ุ `/ban`ุ `/unban` ู ...)
- ุซุจุช ููุฏูุฑูุง callback query ุจุฑุง ุฏฺฉููโูุง ุงููุงู
- ููุฏูุฑ ูพุงูโูุง ุจุฑุง ุฏุฑุงูุช ูุงู ู ูพุฑุฏุงุฒุด ูุฑุงุญู ูุฎุชูู
- ูุฏุฑุช ุฎุทุงูุง ู ุงุทูุงุนโุฑุณุงู ุจู ุงุฏูู

### `db.js` - ุฏุชุงุจุณ
- ุงุณุชูุงุฏู ุงุฒ SQLite ุจุฑุง ุฐุฎุฑูโุณุงุฒ
- ุฌุฏุงูู: `settings`ุ `users`ุ `banned_users`ุ `force_join_channels`ุ `files`ุ `user_channel_joins`
- ฺฉุด ุชูุธูุงุช ุจุฑุง ุนููฺฉุฑุฏ ุจูุชุฑ
- ุชูุงุจุน: `initializeDatabase`ุ `getSetting`ุ `setSetting`ุ `readDB`ุ `saveUser`ุ `deleteFileByIdentifier`

### `src/admin.js` - ูพูู ุงุฏูู
- `showMainAdminPanel` - ููุงุด ููู ุงุตู ุงุฏูู
- `promptForBroadcast` - ุงูุชุฎุงุจ ููุน ุงุฑุณุงู ููฺฏุงู
- `showUserManagementMenu` - ูุฏุฑุช ฺฉุงุฑุจุฑุงู (ุจู/ุขูุจู)
- `showAdvancedSettingsMenu` - ุชูุธูุงุช ูพุดุฑูุชู
- `showStatisticsMenu` - ุขูุงุฑ ุฑุจุงุช
- `showAdminHelpGuide` - ุฑุงูููุง ฺฉุงูู ุงุฏูู

### `src/broadcast.js` - ุงุฑุณุงู ููฺฏุงู
- ุงุฑุณุงู ูพุงู ุจู ุชูุงู ฺฉุงุฑุจุฑุงู ูุนุงู (ุบุฑ ุจู ุดุฏู)
- ุฏู ุญุงูุช: **ุงุฑุณุงู ุฌุฏุฏ** (copyMessage) ู **ููุฑูุงุฑุฏ** (forwardMessage)
- **ูุฏุฑุช ูุฑุฎ ุงุฑุณุงู ุจููู**:
  - ุชุฃุฎุฑ ุชุทุจู ุจู ูพุงูโูุง (ฑ.ต ุชุง ฒ.ต ุซุงููุ ุงูุฒุงุด ุฎูุฏฺฉุงุฑ ููฺฏุงู ุฏุฑุงูุช ุฎุทุง 429)
  - ุงุฑุณุงู ุฏุณุชูโุง (ูุฑ ุฏุณุชู ฒต ฺฉุงุฑุจุฑ)
  - ูฺฉุซ ฑฐ ุซุงููโ ุจู ุฏุณุชูโูุง
  - ุชูุงุด ูุฌุฏุฏ ุชุง ท ุจุงุฑ ุจุง backoff ููฺฏุงู ุฎุทุง 429
  - ุญุงุดู ุงููุช ฒ ุซุงููโุง ุจุนุฏ ุงุฒ retry_after

### `src/config.js` - ุชูุธูุงุช
- ุชูฺฉู ู ุดูุงุณู ุงุฏููโูุง ูุณุชููุงู ุฏุฑ ูุงู ุชุนุฑู ุดุฏูโุงูุฏ
- ุชูุธูุงุช ุถุฏ ุงุณูพู (`FLOOD_LIMIT_SECONDS_GLOBAL`ุ `FLOOD_BAN_DURATION_MS`)
- ูพฺฉุฑุจูุฏ ูุงฺฏุฑ Winston

### `src/fileManager.js` - ูุฏุฑุช ูุงู
- `sendFileContent` - ุงุฑุณุงู ูุงู ุจู ฺฉุงุฑุจุฑ ุจุง ุญุฐู ุฎูุฏฺฉุงุฑ
- `handleFileRequest` - ูพุฑุฏุงุฒุด ุฏุฑุฎูุงุณุช ูุงู ุจุง ุจุฑุฑุณ ุนุถูุช ู ุจุฑุฑุณ ุงุฌุจุงุฑ
- `confirmAndSendFile` - ุชุงุฏ ุจุฑุฑุณ ุงุฌุจุงุฑ ู ุงุฑุณุงู ูุงู
- `processAndSaveSingleFile` - ุฐุฎุฑู ูุงู ุชฺฉ
- `processAndSaveGroupFiles` - ุฐุฎุฑู ูุฌููุนู ูุงูโูุง

### `src/forceJoin.js` - ุฌูู ุงุฌุจุงุฑ
- `checkUserSubscription` - ุจุฑุฑุณ ุนุถูุช ฺฉุงุฑุจุฑ ุฏุฑ ฺฉุงูุงูโูุง ุงุฌุจุงุฑ
- `trackChannelJoin` - ุฑุฏุงุจ ุชุนุฏุงุฏ ุงุนุถุง ู ุดุฑุท ุญุฐู ุฎูุฏฺฉุงุฑ
- `registerForceJoinHandlers` - ุซุจุช ููุฏูุฑ ุชุงุฏ ุนุถูุช

### `src/helpers.js` - ุชูุงุจุน ฺฉูฺฉ
- `generateFileIdentifier` - ุณุงุฎุช ุดูุงุณู ุชุตุงุฏู ุจุฑุง ูุงู
- `safeEditOrReply` - ุงุฑุณุงู ุงูู ูพุงู (ูุฑุงุด ุง ูพุงุณุฎ)

### `src/middleware.js` - ูุฏููุฑูุง
- ููุชุฑ ฺุช ุฎุตูุต
- ุจุฑุฑุณ ุจู ุจูุฏู ฺฉุงุฑุจุฑ
- ุจุฑุฑุณ ูุนุงู ุจูุฏู ุฑุจุงุช
- ุญูุงุธุช ุถุฏ ุงุณูพู (ูููุฏ)
- ูุฏุฑุช ุณุดู

---

## ุฏุณุชูุฑุงุช ุงุฏูู

| ุฏุณุชูุฑ | ุชูุถุญ |
|--------|--------|
| `/start` | ุดุฑูุน ุฑุจุงุช / ููุงุด ูพูู ุงุฏูู |
| `/help` | ููุงุด ุฑุงูููุง ฺฉุงูู ุงุฏูู |
| `/cancel` | ูุบู ุนููุงุช ุฌุงุฑ |
| `/skip` | ุฑุฏ ฺฉุฑุฏู ฺฉูพุดู ูุงู |
| `/done` | ุงุชูุงู ุขูพููุฏ ฺฏุฑูู |
| `/ban` | ูุณุฏูุฏ ฺฉุฑุฏู ฺฉุงุฑุจุฑ |
| `/unban` | ุฑูุน ูุณุฏูุฏุช ฺฉุงุฑุจุฑ |
| `/list` | ููุงุด ุขูุงุฑ ูุงูโูุง |
| `/addch` | ูุฏุฑุช ุฌูู ุงุฌุจุงุฑ |
| `/mes` | ุงุฑุณุงู ููฺฏุงู |

---

## ูฺฉุงุช ููู

### ุฌููฺฏุฑ ุงุฒ ูุญุฏูุฏุช ุชูฺฏุฑุงู
ุฑุจุงุช ุงุฒ ุณุณุชู ุชุฃุฎุฑ ุชุทุจู ุงุณุชูุงุฏู ูโฺฉูุฏ:
- ูุฑ ูพุงู ุจุง ุชุฃุฎุฑ ุชุตุงุฏู ุงุฑุณุงู ูโุดูุฏ
- ุงฺฏุฑ ุชูฺฏุฑุงู ุฎุทุง 429 ุจุฏูุฏุ ุชุฃุฎุฑ ุฎูุฏฺฉุงุฑ ุงูุฒุงุด ูโุงุจุฏ
- ูพุงูโูุง ุฏุฑ ุฏุณุชูโูุง ฺฉูฺฺฉ ุงุฑุณุงู ูโุดููุฏ
- ุจู ุฏุณุชูโูุง ูฺฉุซ ุฎูุฏฺฉุงุฑ ุงุนูุงู ูโุดูุฏ

### ุงููุช
- ููุท ุงุฏููโูุง ุชุนุฑู ุดุฏู ุฏุฑ `ADMIN_IDs` ุจู ูพูู ูุฏุฑุช ุฏุณุชุฑุณ ุฏุงุฑูุฏ
- ุณุณุชู ุถุฏ ุงุณูพู ูุนุงู ุงุณุช
- ฺฉุงุฑุจุฑุงู ุจู ุดุฏู ููโุชูุงููุฏ ุงุฒ ุฑุจุงุช ุงุณุชูุงุฏู ฺฉููุฏ

### ุฏุชุงุจุณ
- ุงุฒ SQLite ุงุณุชูุงุฏู ูโุดูุฏ (ูุงู `database.sqlite`)
- ุชูุธูุงุช ฺฉุด ูโุดููุฏ ุจุฑุง ุนููฺฉุฑุฏ ุจูุชุฑ
- ุฌุฏุงูู ุฎูุฏฺฉุงุฑ ุณุงุฎุชู ูโุดููุฏ
